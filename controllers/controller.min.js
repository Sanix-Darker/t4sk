$(function(){getData(startView,errorHandler),$(window).bind("keydown",function(a){if(a.ctrlKey&&"s"===String.fromCharCode(a.which).toLowerCase()){a.preventDefault(),a.stopImmediatePropagation();var b=mapData($("#base-list"));saveJSON(b)}}),window.onbeforeunload=function(){return saveState.listsChanged?"Data will be lost if you leave the page, are you sure?":void 0}});var errorHandler=function(a){alert("Database connection error. AJAX error:\r\n "+a)},saveData=function(a){var b=mapData(a);saveJSON(b,errorHandler)},saveState=function(){this.listsChanged=!1};